### ⭐️ 4주차 과제 제출 ⭐️

## ❗️ 강의 수강 여부

수강한 강의에 체크표시 해주세요~

- [x] 데이터베이스
- [x] 데이터베이스\_MySQL
- [x] 리눅스에 MySQL 설치하기

<br>

## ❗️ notion에 키워드 정리 완료 여부

내가 notion에 키워드를 정리를 완료한 경우 체크표시 해주세요~

- [ ] 키워드 정리 완료

<br>

## ❗️ 3주차 과제 추가 사항

1. 리버스 프록시 적용
   저번주에 nginx를 설치만 하고 실제로 사용은 안했어서 어떻게 사용하는 지 궁금해서 이것저것 만져봤습니다. (사실 CI/CD가 제 이번주 발표라서 공부하려고 했는데 이것도 흥미로워서요)

![img](https://cdn.discordapp.com/attachments/1156230299202625608/1159149306255790100/2023-10-05_12.25.22.png?ex=651ed56a&is=651d83ea&hm=5f490c5db778e4235ec23fd728318c4d3d55dafe45b9e07a04384085a3e50c4b&)

우선 실험하려면 서버가 하나 필요하니까 nest JS 기본 서버를 하나 만들어 주었습니다.

![img](https://cdn.discordapp.com/attachments/1156230299202625608/1159150077005271111/2023-10-05_12.28.25.png?ex=651ed622&is=651d84a2&hm=6c7d71c8a5e635160405c879134642ed38fa255571c173b5f46bbe4ba14902db&)

제 서버는 현재 포트를 3000번을 사용하고 있습니다. 기본 설정에서 건드리지 않았습니다. 기본적으로 리버스 프록시는 제 서버의 포트번호를 감춰주는 방식이라고 하더라구요. http 와 https는 80, 443 포트로 입력이 들어오는데, 이를 nginx에서 받아서 제 서버의 포트로 넘겨주는 방식으로 사용할 수 있다고 합니다. 한 번 해보겠습니다.

sites-available 파일에 들어 있는 default 파일에 들어가줍니다.

<gpt 왈>
Nginx의 sites-available 디렉토리는 가상 호스트 (Virtual Host) 설정 파일을 저장하는 곳입니다. 이 디렉토리에 있는 각 설정 파일은 웹 서버에서 호스팅하는 여러 웹 사이트 또는 웹 애플리케이션의 설정을 정의합니다. Nginx는 이러한 설정 파일을 사용하여 요청된 도메인 또는 호스트 이름에 따라 다른 웹 사이트 또는 애플리케이션으로 요청을 라우팅합니다.

음.. 대강 이해를 해보자면 nginx는 여러 개의 서버를 호스팅 할 수 있는 것 같습니다. 그래서 이걸 이용해서도 노드밸런싱을 하는 repo를 많이 본 것 같습니다. 네 그래서 간단하게 생각해보면 라우팅 설정을 정의하는 것 같습니다. 도메인이나 IP를 확인하고 어디를 갈 것인지 길에 대한 정보를 제공한다? 정도로 이해했습니다 저는.

![img](https://cdn.discordapp.com/attachments/1156230299202625608/1159152950061576273/2023-10-05_12.39.53.png?ex=651ed8cf&is=651d874f&hm=40b76694a29942412787a61fe23f5647292ed2bfaa8cbc8f83a1e991a177b2eb&)

우선 이렇게 적으니까 되긴 되었는데, 해석을 조금 해보자면

location / : 경로가 root 인 요청에 경우에 블록 안에 내용으로 처리하겠다.

proxy_pass http://localhost:3000 : 프록시 개념은 검색해보면 이해하기 어렵지 않습니다. 대리로 프로토콜에서 응답해주는 것입니다. 여튼, 모든 nginx 서버에 들어오는 요청을 이 해당 서버로 프록시를 해달라는 고 설정하는 것입니다.

하고 아래는 http 요청의 헤더를 설정해주는 것입니다.

문제라면 이렇게만 하면 http 요청도 있고 https 요청도 있어서 조금 꼬이더라구요..

![img](https://cdn.discordapp.com/attachments/1156230299202625608/1159156962253082634/2023-10-05_12.55.51.png?ex=651edc8b&is=651d8b0b&hm=6c8b5038c685858ed5574b704b7816979f63ee8dc6d77d1d46bc1ee2e8ab67ce&)

그래서 일단 문제를 간단하게 하기 위해서 모든 http 요청은 https 요청으로 바꾸고 하나의 도메인으로 통일했습니다.

그러면 이제 www.hjboom.shop, hjboom.shop, hong.hjboom.shop 모두 https://www.hjboom.shop으로 연결됩니다.

![img](https://cdn.discordapp.com/attachments/1156230299202625608/1159159009979416727/2023-10-05_1.03.58.png?ex=651ede74&is=651d8cf4&hm=9d57cb1cfc30238ad115ec7f0b59669839f9b9bd0a91bec8136d53b58b0adaf9&)

제 서버에 기본 화면을 설정하지 않아서 이렇게 되어있구요

![img](https://cdn.discordapp.com/attachments/1156230299202625608/1159159337781035118/2023-10-05_1.05.17.png?ex=651edec2&is=651d8d42&hm=86676b07d19bb828c61688d678f3274b3aa6975bd86d9dd8e0d9f83965713959&)

test end point를 넣어주면?

![img](https://cdn.discordapp.com/attachments/1156230299202625608/1159159510049488937/2023-10-05_1.05.59.png?ex=651edeeb&is=651d8d6b&hm=f928c9ce4b991f7e062175597afe17ae262fb7868f5f43e0548b7651030d7c79&)

이제 nginx로 제 서버에 접속을 할 수 있게 되었습니다!

제가 혼자서 나름 뚱땅뚱땅 해보긴 했는데, 제가 의도한 방향으로는 굴러갔는데 이것에 대한 이해도가 많이 모자란 것 같습니다. 제가 잘 설정했는 지 모르겠네요. 더 공부를 해야할 것 같습니다.

2. certbon 설정 / ssl/tls 인증서 자동발급

core 님께서 자동 초기화가 가능하다고 하셔서 주신 repo를 참고해 보았는데

certbon 파일을 수정해서 주기적으로 특정 명령을 실행시킬 수 있다고 하더라구요. 역시 자동은 최고에요.

certbon 파일 위치는 /var/spool/cron에 있습니다.

sudo certbon -e 로 열어주고 수정해주면 됩니다.

![img](https://cdn.discordapp.com/attachments/1156230299202625608/1159161029641650276/2023-10-05_1.12.01.png?ex=651ee055&is=651d8ed5&hm=c26e3312cb7e9064cb1500de143ed977c9765ffc7c12666a88f0fba22b14128b&)

앞에는 특정 시간대를 의미하는 것이구요, 뒤에는 그 때 실행할 명령어를 말합니다.

## ❗️ 4주차 과제

과제를 노션에다가 열심히 작성했습니다.

https://humdrum-lettuce-91a.notion.site/4-78142f9b16cd4b01be9592847fce03fd?pvs=4
